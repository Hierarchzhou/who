{"ast":null,"code":"import { createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, normalizeClass as _normalizeClass, openBlock as _openBlock, createElementBlock as _createElementBlock, renderList as _renderList, Fragment as _Fragment, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"online-users-sidebar\"\n};\nconst _hoisted_2 = {\n  class: \"users-list\"\n};\nconst _hoisted_3 = {\n  class: \"user-group\"\n};\nconst _hoisted_4 = {\n  class: \"group-header\"\n};\nconst _hoisted_5 = {\n  class: \"group-name\"\n};\nconst _hoisted_6 = {\n  class: \"user-avatar-container\"\n};\nconst _hoisted_7 = [\"src\"];\nconst _hoisted_8 = [\"title\"];\nconst _hoisted_9 = {\n  class: \"user-info\"\n};\nconst _hoisted_10 = {\n  class: \"user-name\"\n};\nconst _hoisted_11 = {\n  class: \"user-status-text\"\n};\nconst _hoisted_12 = {\n  class: \"user-avatar-container\"\n};\nconst _hoisted_13 = [\"src\"];\nconst _hoisted_14 = {\n  class: \"user-info\"\n};\nconst _hoisted_15 = {\n  class: \"user-name\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createCommentVNode(\" 频道信息 \"), _cache[7] || (_cache[7] = _createElementVNode(\"div\", {\n    class: \"channel-info\"\n  }, [_createElementVNode(\"h3\", {\n    class: \"channel-name\"\n  }, \"general\"), _createElementVNode(\"button\", {\n    class: \"channel-button\"\n  }, [_createElementVNode(\"span\", {\n    class: \"icon\"\n  }, \"⚙️\")])], -1 /* HOISTED */)), _createCommentVNode(\" 用户分组列表 \"), _createElementVNode(\"div\", _hoisted_2, [_createCommentVNode(\" 在线用户组 \"), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"span\", _hoisted_5, \"在线 — \" + _toDisplayString($props.onlineUsers.length), 1 /* TEXT */), _cache[3] || (_cache[3] = _createElementVNode(\"button\", {\n    class: \"group-collapse-button\"\n  }, [_createElementVNode(\"span\", {\n    class: \"icon\"\n  }, \"▼\")], -1 /* HOISTED */))]), _createCommentVNode(\" 当前用户 \"), $setup.currentUsername ? (_openBlock(), _createElementBlock(\"div\", {\n    key: 0,\n    class: \"user-item current-user\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $setup.handleAvatarClick && $setup.handleAvatarClick(...args))\n  }, [_createElementVNode(\"div\", _hoisted_6, [_createElementVNode(\"img\", {\n    src: $setup.getCurrentUserAvatar(),\n    alt: \"当前用户头像\",\n    class: \"user-avatar\",\n    onError: _cache[0] || (_cache[0] = (...args) => $setup.onAvatarError && $setup.onAvatarError(...args))\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_7), _createElementVNode(\"div\", {\n    class: _normalizeClass(['status-indicator', $setup.currentUserStatus]),\n    title: $setup.getStatusText($setup.currentUserStatus)\n  }, null, 10 /* CLASS, PROPS */, _hoisted_8)]), _createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"div\", _hoisted_10, _toDisplayString($setup.currentUsername), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_11, _toDisplayString($setup.getStatusText($setup.currentUserStatus)), 1 /* TEXT */)])])) : _createCommentVNode(\"v-if\", true), _createCommentVNode(\" 其他在线用户 \"), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.otherUsers, user => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: user.username,\n      class: \"user-item\"\n    }, [_createElementVNode(\"div\", _hoisted_12, [_createElementVNode(\"img\", {\n      src: user.avatar || $setup.defaultAvatar,\n      alt: \"用户头像\",\n      class: \"user-avatar\",\n      onError: _cache[2] || (_cache[2] = (...args) => $setup.onAvatarError && $setup.onAvatarError(...args))\n    }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_13), _cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n      class: \"status-indicator online\",\n      title: \"在线\"\n    }, null, -1 /* HOISTED */))]), _createElementVNode(\"div\", _hoisted_14, [_createElementVNode(\"div\", _hoisted_15, _toDisplayString(user.username), 1 /* TEXT */), _cache[5] || (_cache[5] = _createElementVNode(\"div\", {\n      class: \"user-status-text\"\n    }, \"在线\", -1 /* HOISTED */))])]);\n  }), 128 /* KEYED_FRAGMENT */))]), _createCommentVNode(\" 离线用户组 \"), _cache[6] || (_cache[6] = _createStaticVNode(\"<div class=\\\"user-group\\\" data-v-c35a2d04><div class=\\\"group-header\\\" data-v-c35a2d04><span class=\\\"group-name\\\" data-v-c35a2d04>离线 — 0</span><button class=\\\"group-collapse-button\\\" data-v-c35a2d04><span class=\\\"icon\\\" data-v-c35a2d04>▼</span></button></div></div>\", 1))])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createCommentVNode","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_hoisted_5","_toDisplayString","$props","onlineUsers","length","$setup","currentUsername","key","onClick","_cache","args","handleAvatarClick","_hoisted_6","src","getCurrentUserAvatar","alt","onError","onAvatarError","_hoisted_7","_normalizeClass","currentUserStatus","title","getStatusText","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_Fragment","_renderList","otherUsers","user","username","_hoisted_12","avatar","defaultAvatar","_hoisted_13","_hoisted_14","_hoisted_15","_createStaticVNode"],"sources":["C:\\Users\\Administrator\\Desktop\\who\\src\\components\\chat\\OnlineUsersSidebar.vue"],"sourcesContent":["<template>\n  <div class=\"online-users-sidebar\">\n    <!-- 频道信息 -->\n    <div class=\"channel-info\">\n      <h3 class=\"channel-name\">general</h3>\n      <button class=\"channel-button\">\n        <span class=\"icon\">⚙️</span>\n      </button>\n    </div>\n\n    <!-- 用户分组列表 -->\n    <div class=\"users-list\">\n      <!-- 在线用户组 -->\n      <div class=\"user-group\">\n        <div class=\"group-header\">\n          <span class=\"group-name\">在线 — {{ onlineUsers.length }}</span>\n          <button class=\"group-collapse-button\">\n            <span class=\"icon\">▼</span>\n          </button>\n        </div>\n\n        <!-- 当前用户 -->\n        <div \n          class=\"user-item current-user\" \n          v-if=\"currentUsername\"\n          @click=\"handleAvatarClick\"\n        >\n          <div class=\"user-avatar-container\">\n            <img \n              :src=\"getCurrentUserAvatar()\" \n              alt=\"当前用户头像\" \n              class=\"user-avatar\"\n              @error=\"onAvatarError\"\n            />\n            <div \n              :class=\"['status-indicator', currentUserStatus]\"\n              :title=\"getStatusText(currentUserStatus)\"\n            ></div>\n          </div>\n          <div class=\"user-info\">\n            <div class=\"user-name\">{{ currentUsername }}</div>\n            <div class=\"user-status-text\">{{ getStatusText(currentUserStatus) }}</div>\n          </div>\n        </div>\n\n        <!-- 其他在线用户 -->\n        <div \n          v-for=\"user in otherUsers\" \n          :key=\"user.username\"\n          class=\"user-item\"\n        >\n          <div class=\"user-avatar-container\">\n            <img \n              :src=\"user.avatar || defaultAvatar\" \n              alt=\"用户头像\" \n              class=\"user-avatar\"\n              @error=\"onAvatarError\"\n            />\n            <div \n              class=\"status-indicator online\"\n              title=\"在线\"\n            ></div>\n          </div>\n          <div class=\"user-info\">\n            <div class=\"user-name\">{{ user.username }}</div>\n            <div class=\"user-status-text\">在线</div>\n          </div>\n        </div>\n      </div>\n\n      <!-- 离线用户组 -->\n      <div class=\"user-group\">\n        <div class=\"group-header\">\n          <span class=\"group-name\">离线 — 0</span>\n          <button class=\"group-collapse-button\">\n            <span class=\"icon\">▼</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { useStore } from 'vuex'\nimport { computed } from 'vue'\n\nexport default {\n  name: 'OnlineUsersSidebar',\n  props: {\n    onlineUsers: {\n      type: Array,\n      required: true,\n      default: () => []\n    }\n  },\n  emits: ['open-profile-editor'],\n  setup(props, { emit }) {\n    const store = useStore()\n    const defaultAvatar = 'https://ui-avatars.com/api/?name=User&background=random'\n\n    const currentUsername = computed(() => store.getters['userProfile/username'])\n    const currentUserAvatar = computed(() => store.getters['userProfile/avatar'])\n    const currentUserStatus = computed(() => store.getters['userProfile/status'])\n    \n    // 添加其他用户的计算属性\n    const otherUsers = computed(() => \n      props.onlineUsers.filter(user => user.username !== currentUsername.value)\n    )\n\n    const getStatusText = (status) => {\n      const statusMap = {\n        online: '在线',\n        away: '离开',\n        busy: '请勿打扰',\n        invisible: '隐身'\n      }\n      return statusMap[status] || '离线'\n    }\n\n    const getCurrentUserAvatar = () => {\n      return currentUserAvatar.value || defaultAvatar\n    }\n\n    const onAvatarError = (e) => {\n      e.target.src = defaultAvatar\n    }\n\n    // 添加处理头像点击的方法\n    const handleAvatarClick = () => {\n      emit('open-profile-editor')\n    }\n\n    return {\n      currentUsername,\n      currentUserStatus,\n      defaultAvatar,\n      getCurrentUserAvatar,\n      onAvatarError,\n      getStatusText,\n      otherUsers,\n      handleAvatarClick\n    }\n  }\n}\n</script>\n\n<style scoped>\n.online-users-sidebar {\n  width: 240px;\n  height: 100vh;\n  background-color: var(--background-secondary);\n  display: flex;\n  flex-direction: column;\n  flex-shrink: 0;\n  border-left: 1px solid var(--background-tertiary);\n}\n\n.channel-info {\n  height: 48px;\n  padding: 0 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  border-bottom: 1px solid var(--background-tertiary);\n  flex-shrink: 0;\n}\n\n.channel-name {\n  color: var(--header-primary);\n  font-size: 16px;\n  font-weight: 600;\n  flex: 1;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n}\n\n.channel-button {\n  width: 32px;\n  height: 32px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  background: transparent;\n  border-radius: 4px;\n  color: var(--interactive-normal);\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.channel-button:hover {\n  color: var(--interactive-hover);\n  background-color: var(--background-modifier-hover);\n}\n\n.users-list {\n  flex: 1;\n  overflow-y: auto;\n  padding: 8px 0;\n}\n\n.user-group {\n  margin-bottom: 16px;\n}\n\n.group-header {\n  padding: 8px 16px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n  cursor: pointer;\n}\n\n.group-name {\n  color: var(--channels-default);\n  font-size: 12px;\n  font-weight: 600;\n  text-transform: uppercase;\n}\n\n.group-collapse-button {\n  width: 16px;\n  height: 16px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border: none;\n  background: transparent;\n  color: var(--interactive-normal);\n  cursor: pointer;\n  transition: transform 0.2s ease;\n}\n\n.group-collapse-button:hover {\n  color: var(--interactive-hover);\n}\n\n.group-collapse-button .icon {\n  font-size: 10px;\n}\n\n.user-item {\n  display: flex;\n  align-items: center;\n  padding: 6px 8px;\n  margin: 1px 8px;\n  border-radius: 4px;\n  cursor: pointer;\n  transition: all 0.2s ease;\n}\n\n.user-item:hover {\n  background-color: var(--background-modifier-hover);\n}\n\n.user-avatar-container {\n  position: relative;\n  width: 32px;\n  height: 32px;\n  margin-right: 12px;\n}\n\n.user-avatar {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  object-fit: cover;\n}\n\n.status-indicator {\n  position: absolute;\n  bottom: -2px;\n  right: -2px;\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  border: 3px solid var(--background-secondary);\n  background-color: var(--offline-color);\n}\n\n.status-indicator.online {\n  background-color: var(--online-color);\n}\n\n.status-indicator.away {\n  background-color: var(--idle-color);\n}\n\n.status-indicator.busy {\n  background-color: var(--dnd-color);\n}\n\n.status-indicator.invisible {\n  background-color: var(--offline-color);\n}\n\n.user-info {\n  flex: 1;\n  min-width: 0;\n  display: flex;\n  flex-direction: column;\n  gap: 2px;\n}\n\n.user-name {\n  color: var(--header-primary);\n  font-size: 14px;\n  font-weight: 500;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n.user-status-text {\n  color: var(--text-muted);\n  font-size: 12px;\n  white-space: nowrap;\n  overflow: hidden;\n  text-overflow: ellipsis;\n}\n\n/* 滚动条样式 */\n.users-list::-webkit-scrollbar {\n  width: 8px;\n}\n\n.users-list::-webkit-scrollbar-track {\n  background-color: transparent;\n  border-radius: 4px;\n}\n\n.users-list::-webkit-scrollbar-thumb {\n  background-color: var(--background-tertiary);\n  border-radius: 4px;\n  min-height: 40px;\n}\n\n.users-list::-webkit-scrollbar-thumb:hover {\n  background-color: var(--background-accent);\n}\n\n/* 响应式样式 */\n@media (max-width: 768px) {\n  .online-users-sidebar {\n    position: fixed;\n    right: 0;\n    top: 0;\n    z-index: 100;\n    transform: translateX(100%);\n    transition: transform 0.3s ease;\n  }\n\n  .online-users-sidebar.show {\n    transform: translateX(0);\n  }\n}\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}