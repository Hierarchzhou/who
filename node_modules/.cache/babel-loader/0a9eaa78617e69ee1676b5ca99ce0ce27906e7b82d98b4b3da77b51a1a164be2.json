{"ast":null,"code":"import { ref, watch } from 'vue';\nimport { getFallbackAvatarUrl, handleAvatarError } from '../../utils/avatarUtils';\nimport AvatarPicker from './AvatarPicker.vue';\nexport default {\n  name: 'UserProfileEditor',\n  components: {\n    AvatarPicker\n  },\n  props: {\n    isOpen: {\n      type: Boolean,\n      default: false\n    },\n    currentUserInfo: {\n      type: Object,\n      default: () => ({\n        username: '',\n        avatar: '',\n        status: 'online',\n        bio: ''\n      })\n    }\n  },\n  setup(props, {\n    emit\n  }) {\n    const username = ref('');\n    const currentAvatar = ref('');\n    const currentStatus = ref('online');\n    const bio = ref('');\n    const showAvatarPicker = ref(false);\n    const statusOptions = {\n      online: '在线',\n      idle: '离开',\n      dnd: '请勿打扰',\n      invisible: '隐身'\n    };\n\n    // 监听props变化\n    watch(() => props.currentUserInfo, newValue => {\n      username.value = newValue.username || '';\n      currentAvatar.value = newValue.avatar || '';\n      currentStatus.value = newValue.status || 'online';\n      bio.value = newValue.bio || '';\n    }, {\n      immediate: true,\n      deep: true\n    });\n\n    // 打开头像选择器\n    const openAvatarPicker = () => {\n      showAvatarPicker.value = true;\n    };\n\n    // 关闭头像选择器\n    const closeAvatarPicker = () => {\n      showAvatarPicker.value = false;\n    };\n\n    // 选择头像\n    const handleAvatarSelected = avatar => {\n      currentAvatar.value = avatar;\n    };\n\n    // 选择状态\n    const selectStatus = status => {\n      currentStatus.value = status;\n    };\n\n    // 保存资料\n    const saveProfile = () => {\n      emit('update-profile', {\n        username: username.value,\n        avatar: currentAvatar.value,\n        status: currentStatus.value,\n        bio: bio.value\n      });\n      emit('close');\n    };\n\n    // 关闭编辑器\n    const closeEditor = () => {\n      emit('close');\n    };\n    return {\n      username,\n      currentAvatar,\n      currentStatus,\n      bio,\n      statusOptions,\n      showAvatarPicker,\n      selectStatus,\n      saveProfile,\n      closeEditor,\n      openAvatarPicker,\n      closeAvatarPicker,\n      handleAvatarSelected,\n      getFallbackAvatarUrl,\n      handleAvatarError\n    };\n  }\n};","map":{"version":3,"names":["ref","watch","getFallbackAvatarUrl","handleAvatarError","AvatarPicker","name","components","props","isOpen","type","Boolean","default","currentUserInfo","Object","username","avatar","status","bio","setup","emit","currentAvatar","currentStatus","showAvatarPicker","statusOptions","online","idle","dnd","invisible","newValue","value","immediate","deep","openAvatarPicker","closeAvatarPicker","handleAvatarSelected","selectStatus","saveProfile","closeEditor"],"sources":["C:\\Users\\Administrator\\Desktop\\discord-chat-app\\fack\\just-do-it\\src\\components\\chat\\UserProfileEditor.vue"],"sourcesContent":["<template>\r\n  <div class=\"profile-editor-overlay\" v-if=\"isOpen\" @click.self=\"closeEditor\">\r\n    <div class=\"profile-editor-container\">\r\n      <!-- 头部 -->\r\n      <div class=\"profile-editor-header\">\r\n        <h2>个人资料</h2>\r\n        <button class=\"close-button\" @click=\"closeEditor\">\r\n          <span class=\"close-icon\">×</span>\r\n        </button>\r\n      </div>\r\n      \r\n      <!-- 主要内容区域 -->\r\n      <div class=\"profile-editor-content\">\r\n        <!-- 头像编辑区域 -->\r\n        <div class=\"avatar-section\">\r\n          <div class=\"current-avatar-wrapper\">\r\n            <img \r\n              :src=\"currentAvatar || getFallbackAvatarUrl()\" \r\n              alt=\"当前头像\" \r\n              class=\"current-avatar\"\r\n              @error=\"handleAvatarError\"\r\n            />\r\n            <div class=\"avatar-overlay\" @click=\"openAvatarPicker\">\r\n              <span class=\"material-icons\">photo_camera</span>\r\n              <span class=\"change-text\">更换头像</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        <!-- 用户信息编辑区域 -->\r\n        <div class=\"user-info-section\">\r\n          <div class=\"form-group\">\r\n            <label for=\"username\">\r\n              <span class=\"material-icons\">用户</span>\r\n              用户名\r\n            </label>\r\n            <input \r\n              type=\"text\" \r\n              id=\"username\" \r\n              v-model=\"username\" \r\n              placeholder=\"设置你的用户名\"\r\n              class=\"form-input\"\r\n            />\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"status\">\r\n              <span class=\"material-icons\">状态</span>\r\n              状态\r\n            </label>\r\n            <div class=\"status-selector\">\r\n              <button \r\n                v-for=\"(status, key) in statusOptions\" \r\n                :key=\"key\"\r\n                class=\"status-option\"\r\n                :class=\"{ active: currentStatus === key }\"\r\n                @click=\"selectStatus(key)\"\r\n              >\r\n                <span class=\"status-icon\" :class=\"key\"></span>\r\n                <span class=\"status-text\">{{ status }}</span>\r\n              </button>\r\n            </div>\r\n          </div>\r\n          \r\n          <div class=\"form-group\">\r\n            <label for=\"bio\">\r\n              <span class=\"material-icons\">简介</span>\r\n              个人简介\r\n            </label>\r\n            <textarea \r\n              id=\"bio\" \r\n              v-model=\"bio\" \r\n              placeholder=\"介绍一下自己吧...\"\r\n              class=\"form-input bio-input\"\r\n              rows=\"3\"\r\n            ></textarea>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      \r\n      <!-- 底部按钮 -->\r\n      <div class=\"profile-editor-footer\">\r\n        <button class=\"cancel-button\" @click=\"closeEditor\">\r\n          <span class=\"material-icons\">取消</span>\r\n          取消\r\n        </button>\r\n        <button class=\"save-button\" @click=\"saveProfile\">\r\n          <span class=\"material-icons\">确认</span>\r\n          保存更改\r\n        </button>\r\n      </div>\r\n    </div>\r\n\r\n    <!-- 头像选择器 -->\r\n    <AvatarPicker\r\n      v-if=\"showAvatarPicker\"\r\n      :currentAvatar=\"currentAvatar\"\r\n      @close=\"closeAvatarPicker\"\r\n      @select=\"handleAvatarSelected\"\r\n    />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, watch } from 'vue';\r\nimport { getFallbackAvatarUrl, handleAvatarError } from '../../utils/avatarUtils';\r\nimport AvatarPicker from './AvatarPicker.vue';\r\n\r\nexport default {\r\n  name: 'UserProfileEditor',\r\n  components: {\r\n    AvatarPicker\r\n  },\r\n  props: {\r\n    isOpen: {\r\n      type: Boolean,\r\n      default: false\r\n    },\r\n    currentUserInfo: {\r\n      type: Object,\r\n      default: () => ({\r\n        username: '',\r\n        avatar: '',\r\n        status: 'online',\r\n        bio: ''\r\n      })\r\n    }\r\n  },\r\n  setup(props, { emit }) {\r\n    const username = ref('');\r\n    const currentAvatar = ref('');\r\n    const currentStatus = ref('online');\r\n    const bio = ref('');\r\n    const showAvatarPicker = ref(false);\r\n    \r\n    const statusOptions = {\r\n      online: '在线',\r\n      idle: '离开',\r\n      dnd: '请勿打扰',\r\n      invisible: '隐身'\r\n    };\r\n\r\n    // 监听props变化\r\n    watch(() => props.currentUserInfo, (newValue) => {\r\n      username.value = newValue.username || '';\r\n      currentAvatar.value = newValue.avatar || '';\r\n      currentStatus.value = newValue.status || 'online';\r\n      bio.value = newValue.bio || '';\r\n    }, { immediate: true, deep: true });\r\n\r\n    // 打开头像选择器\r\n    const openAvatarPicker = () => {\r\n      showAvatarPicker.value = true;\r\n    };\r\n\r\n    // 关闭头像选择器\r\n    const closeAvatarPicker = () => {\r\n      showAvatarPicker.value = false;\r\n    };\r\n\r\n    // 选择头像\r\n    const handleAvatarSelected = (avatar) => {\r\n      currentAvatar.value = avatar;\r\n    };\r\n\r\n    // 选择状态\r\n    const selectStatus = (status) => {\r\n      currentStatus.value = status;\r\n    };\r\n\r\n    // 保存资料\r\n    const saveProfile = () => {\r\n      emit('update-profile', {\r\n        username: username.value,\r\n        avatar: currentAvatar.value,\r\n        status: currentStatus.value,\r\n        bio: bio.value\r\n      });\r\n      emit('close');\r\n    };\r\n\r\n    // 关闭编辑器\r\n    const closeEditor = () => {\r\n      emit('close');\r\n    };\r\n\r\n    return {\r\n      username,\r\n      currentAvatar,\r\n      currentStatus,\r\n      bio,\r\n      statusOptions,\r\n      showAvatarPicker,\r\n      selectStatus,\r\n      saveProfile,\r\n      closeEditor,\r\n      openAvatarPicker,\r\n      closeAvatarPicker,\r\n      handleAvatarSelected,\r\n      getFallbackAvatarUrl,\r\n      handleAvatarError\r\n    };\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.profile-editor-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background-color: rgba(0, 0, 0, 0.8);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n  backdrop-filter: blur(8px);\r\n}\r\n\r\n.profile-editor-container {\r\n  width: 90%;\r\n  max-width: 480px;\r\n  background: var(--chat-background);\r\n  border-radius: 16px;\r\n  overflow: hidden;\r\n  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);\r\n  animation: slideIn 0.3s ease;\r\n}\r\n\r\n@keyframes slideIn {\r\n  from {\r\n    transform: translateY(20px);\r\n    opacity: 0;\r\n  }\r\n  to {\r\n    transform: translateY(0);\r\n    opacity: 1;\r\n  }\r\n}\r\n\r\n.profile-editor-header {\r\n  padding: 20px;\r\n  background: linear-gradient(to right, var(--primary-color), var(--secondary-color));\r\n  color: white;\r\n  display: flex;\r\n  justify-content: space-between;\r\n  align-items: center;\r\n}\r\n\r\n.profile-editor-header h2 {\r\n  margin: 0;\r\n  font-size: 1.5rem;\r\n  font-weight: 600;\r\n}\r\n\r\n.close-button {\r\n  background: none;\r\n  border: none;\r\n  color: white;\r\n  font-size: 24px;\r\n  cursor: pointer;\r\n  width: 32px;\r\n  height: 32px;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  border-radius: 50%;\r\n  transition: background-color 0.2s;\r\n}\r\n\r\n.close-button:hover {\r\n  background-color: rgba(255, 255, 255, 0.2);\r\n}\r\n\r\n.profile-editor-content {\r\n  padding: 24px;\r\n}\r\n\r\n.avatar-section {\r\n  display: flex;\r\n  justify-content: center;\r\n  margin-bottom: 32px;\r\n}\r\n\r\n.current-avatar-wrapper {\r\n  position: relative;\r\n  width: 120px;\r\n  height: 120px;\r\n  border-radius: 50%;\r\n  overflow: hidden;\r\n  cursor: pointer;\r\n  background: linear-gradient(45deg, var(--primary-color), var(--secondary-color));\r\n  padding: 3px;\r\n}\r\n\r\n.current-avatar {\r\n  width: 100%;\r\n  height: 100%;\r\n  object-fit: cover;\r\n  border-radius: 50%;\r\n  background: var(--chat-background);\r\n}\r\n\r\n.avatar-overlay {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n  background: rgba(0, 0, 0, 0.6);\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  opacity: 0;\r\n  transition: opacity 0.2s;\r\n}\r\n\r\n.current-avatar-wrapper:hover .avatar-overlay {\r\n  opacity: 1;\r\n}\r\n\r\n.avatar-overlay .material-icons {\r\n  font-size: 24px;\r\n  color: white;\r\n  margin-bottom: 4px;\r\n}\r\n\r\n.change-text {\r\n  color: white;\r\n  font-size: 14px;\r\n}\r\n\r\n.form-group {\r\n  margin-bottom: 24px;\r\n}\r\n\r\n.form-group label {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  margin-bottom: 8px;\r\n  color: var(--text-color);\r\n  font-weight: 500;\r\n}\r\n\r\n.form-group .material-icons {\r\n  font-size: 20px;\r\n  color: var(--primary-color);\r\n}\r\n\r\n.form-input {\r\n  width: 100%;\r\n  padding: 12px;\r\n  background: var(--input-background);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 8px;\r\n  color: var(--text-color);\r\n  font-size: 14px;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.form-input:focus {\r\n  outline: none;\r\n  border-color: var(--primary-color);\r\n  box-shadow: 0 0 0 2px rgba(var(--primary-color-rgb), 0.2);\r\n}\r\n\r\n.bio-input {\r\n  resize: vertical;\r\n  min-height: 80px;\r\n}\r\n\r\n.status-selector {\r\n  display: grid;\r\n  grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));\r\n  gap: 8px;\r\n}\r\n\r\n.status-option {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 12px;\r\n  background: var(--input-background);\r\n  border: 1px solid var(--border-color);\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.status-option:hover {\r\n  background: var(--hover-color);\r\n}\r\n\r\n.status-option.active {\r\n  background: var(--primary-color);\r\n  color: white;\r\n  border-color: var(--primary-color);\r\n}\r\n\r\n.status-icon {\r\n  width: 8px;\r\n  height: 8px;\r\n  border-radius: 50%;\r\n}\r\n\r\n.status-icon.online { background-color: #43b581; }\r\n.status-icon.idle { background-color: #faa61a; }\r\n.status-icon.dnd { background-color: #f04747; }\r\n.status-icon.invisible { background-color: #747f8d; }\r\n\r\n.profile-editor-footer {\r\n  padding: 16px 24px;\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  gap: 12px;\r\n  background: var(--input-background);\r\n  border-top: 1px solid var(--border-color);\r\n}\r\n\r\n.cancel-button, .save-button {\r\n  display: flex;\r\n  align-items: center;\r\n  gap: 8px;\r\n  padding: 8px 16px;\r\n  border-radius: 8px;\r\n  font-size: 14px;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  transition: all 0.2s;\r\n}\r\n\r\n.cancel-button {\r\n  background: transparent;\r\n  border: 1px solid var(--border-color);\r\n  color: var(--text-color);\r\n}\r\n\r\n.cancel-button:hover {\r\n  background: var(--hover-color);\r\n}\r\n\r\n.save-button {\r\n  background: var(--primary-color);\r\n  border: none;\r\n  color: white;\r\n}\r\n\r\n.save-button:hover {\r\n  background: var(--secondary-color);\r\n  transform: translateY(-1px);\r\n}\r\n\r\n.material-icons {\r\n  font-size: 18px;\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .profile-editor-container {\r\n    width: 100%;\r\n    height: 100%;\r\n    border-radius: 0;\r\n  }\r\n  \r\n  .profile-editor-content {\r\n    padding: 16px;\r\n  }\r\n  \r\n  .status-selector {\r\n    grid-template-columns: repeat(2, 1fr);\r\n  }\r\n}\r\n</style> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}