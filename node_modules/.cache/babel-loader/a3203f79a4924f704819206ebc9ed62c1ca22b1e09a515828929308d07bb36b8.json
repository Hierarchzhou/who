{"ast":null,"code":"import LoginForm from './components/auth/LoginForm.vue';\nimport ChatContainer from './components/chat/ChatContainer.vue';\nimport ServerList from './components/chat/ServerList.vue';\nimport OnlineUsersSidebar from './components/chat/OnlineUsersSidebar.vue';\nimport UserProfileEditor from './components/profile/UserProfileEditor.vue';\nimport { useStore } from 'vuex';\nimport { ref, onMounted, onBeforeUnmount } from 'vue';\nexport default {\n  name: 'App',\n  components: {\n    LoginForm,\n    ChatContainer,\n    ServerList,\n    OnlineUsersSidebar,\n    UserProfileEditor\n  },\n  setup() {\n    const store = useStore();\n    const username = ref('');\n    const avatar = ref('');\n    const onlineUsers = ref([]);\n    const showProfileEditor = ref(false);\n    const userInfo = ref({\n      username: '',\n      avatar: '',\n      bio: ''\n    });\n\n    // 从localStorage获取用户信息\n    onMounted(() => {\n      const savedUsername = localStorage.getItem('chat-username');\n      const savedAvatar = localStorage.getItem('chat-avatar');\n      const savedBio = localStorage.getItem('chat-bio');\n      if (savedUsername) {\n        username.value = savedUsername;\n        avatar.value = savedAvatar || '';\n        userInfo.value = {\n          username: savedUsername,\n          avatar: savedAvatar || '',\n          bio: savedBio || ''\n        };\n\n        // 初始化用户状态\n        store.dispatch('userStatus/setStatus', 'online');\n      }\n\n      // 应用保存的主题\n      const savedTheme = localStorage.getItem('chat-theme') || 'discord';\n      document.body.classList.add(`theme-${savedTheme}`);\n\n      // 添加页面可见性变化监听\n      document.addEventListener('visibilitychange', handleVisibilityChange);\n    });\n    onBeforeUnmount(() => {\n      // 移除页面可见性变化监听\n      document.removeEventListener('visibilitychange', handleVisibilityChange);\n\n      // 用户离开时设置离线状态\n      if (username.value) {\n        store.dispatch('userStatus/setStatus', 'offline');\n      }\n    });\n\n    // 处理页面可见性变化\n    const handleVisibilityChange = () => {\n      if (!username.value) return;\n      if (document.hidden) {\n        store.dispatch('userStatus/setStatus', 'away');\n      } else {\n        store.dispatch('userStatus/setStatus', 'online');\n      }\n    };\n\n    // 设置用户名\n    const setUsername = userData => {\n      username.value = userData.username;\n      avatar.value = userData.avatar || '';\n      userInfo.value = {\n        ...userInfo.value,\n        username: userData.username,\n        avatar: userData.avatar || ''\n      };\n\n      // 保存用户信息到localStorage\n      localStorage.setItem('chat-username', username.value);\n      if (avatar.value) {\n        localStorage.setItem('chat-avatar', avatar.value);\n      }\n\n      // 设置初始在线状态\n      store.dispatch('userStatus/setStatus', 'online');\n    };\n\n    // 更新在线用户列表\n    const updateOnlineUsers = users => {\n      onlineUsers.value = users;\n    };\n\n    // 打开个人资料编辑器\n    const openProfileEditor = () => {\n      showProfileEditor.value = true;\n    };\n\n    // 更新个人资料\n    const updateProfile = profileData => {\n      userInfo.value = {\n        ...userInfo.value,\n        ...profileData\n      };\n\n      // 更新localStorage\n      localStorage.setItem('chat-username', profileData.username);\n      localStorage.setItem('chat-avatar', profileData.avatar);\n      localStorage.setItem('chat-bio', profileData.bio);\n\n      // 更新状态\n      store.dispatch('userStatus/setStatus', profileData.status);\n      showProfileEditor.value = false;\n    };\n    const getFallbackAvatarUrl = () => {\n      return 'https://via.placeholder.com/32x32.png?text=No+Avatar';\n    };\n    return {\n      username,\n      avatar,\n      onlineUsers,\n      showProfileEditor,\n      userInfo,\n      setUsername,\n      updateOnlineUsers,\n      openProfileEditor,\n      updateProfile,\n      getFallbackAvatarUrl\n    };\n  }\n};","map":{"version":3,"names":["LoginForm","ChatContainer","ServerList","OnlineUsersSidebar","UserProfileEditor","useStore","ref","onMounted","onBeforeUnmount","name","components","setup","store","username","avatar","onlineUsers","showProfileEditor","userInfo","bio","savedUsername","localStorage","getItem","savedAvatar","savedBio","value","dispatch","savedTheme","document","body","classList","add","addEventListener","handleVisibilityChange","removeEventListener","hidden","setUsername","userData","setItem","updateOnlineUsers","users","openProfileEditor","updateProfile","profileData","status","getFallbackAvatarUrl"],"sources":["C:\\Users\\Administrator\\Desktop\\discord-chat-app\\fack\\just-do-it\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div v-if=\"!username\" class=\"login-container\">\n      <LoginForm @login=\"setUsername\" />\n    </div>\n    <div v-else class=\"discord-layout\">\n      <!-- 服务器列表 -->\n      <ServerList />\n      \n      <!-- 在线用户列表 -->\n      <OnlineUsersSidebar \n        :onlineUsers=\"onlineUsers\" \n        :currentUsername=\"username\"\n      />\n      \n      <!-- 聊天容器 -->\n      <div class=\"chat-main\">\n        <ChatContainer \n          :currentUser=\"{ username, avatar }\" \n          @update-online-users=\"updateOnlineUsers\"\n        />\n      </div>\n      \n      <!-- 个人资料编辑器 -->\n      <UserProfileEditor\n        v-if=\"showProfileEditor\"\n        :isOpen=\"showProfileEditor\"\n        :currentUserInfo=\"userInfo\"\n        @close=\"showProfileEditor = false\"\n        @update-profile=\"updateProfile\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport LoginForm from './components/auth/LoginForm.vue'\nimport ChatContainer from './components/chat/ChatContainer.vue'\nimport ServerList from './components/chat/ServerList.vue'\nimport OnlineUsersSidebar from './components/chat/OnlineUsersSidebar.vue'\nimport UserProfileEditor from './components/profile/UserProfileEditor.vue'\nimport { useStore } from 'vuex'\nimport { ref, onMounted, onBeforeUnmount } from 'vue'\n\nexport default {\n  name: 'App',\n  components: {\n    LoginForm,\n    ChatContainer,\n    ServerList,\n    OnlineUsersSidebar,\n    UserProfileEditor\n  },\n  setup() {\n    const store = useStore()\n    const username = ref('')\n    const avatar = ref('')\n    const onlineUsers = ref([])\n    const showProfileEditor = ref(false)\n    const userInfo = ref({\n      username: '',\n      avatar: '',\n      bio: ''\n    })\n\n    // 从localStorage获取用户信息\n    onMounted(() => {\n      const savedUsername = localStorage.getItem('chat-username')\n      const savedAvatar = localStorage.getItem('chat-avatar')\n      const savedBio = localStorage.getItem('chat-bio')\n      \n      if (savedUsername) {\n        username.value = savedUsername\n        avatar.value = savedAvatar || ''\n        userInfo.value = {\n          username: savedUsername,\n          avatar: savedAvatar || '',\n          bio: savedBio || ''\n        }\n        \n        // 初始化用户状态\n        store.dispatch('userStatus/setStatus', 'online')\n      }\n      \n      // 应用保存的主题\n      const savedTheme = localStorage.getItem('chat-theme') || 'discord'\n      document.body.classList.add(`theme-${savedTheme}`)\n      \n      // 添加页面可见性变化监听\n      document.addEventListener('visibilitychange', handleVisibilityChange)\n    })\n    \n    onBeforeUnmount(() => {\n      // 移除页面可见性变化监听\n      document.removeEventListener('visibilitychange', handleVisibilityChange)\n      \n      // 用户离开时设置离线状态\n      if (username.value) {\n        store.dispatch('userStatus/setStatus', 'offline')\n      }\n    })\n\n    // 处理页面可见性变化\n    const handleVisibilityChange = () => {\n      if (!username.value) return\n      \n      if (document.hidden) {\n        store.dispatch('userStatus/setStatus', 'away')\n      } else {\n        store.dispatch('userStatus/setStatus', 'online')\n      }\n    }\n\n    // 设置用户名\n    const setUsername = (userData) => {\n      username.value = userData.username\n      avatar.value = userData.avatar || ''\n      userInfo.value = {\n        ...userInfo.value,\n        username: userData.username,\n        avatar: userData.avatar || ''\n      }\n      \n      // 保存用户信息到localStorage\n      localStorage.setItem('chat-username', username.value)\n      if (avatar.value) {\n        localStorage.setItem('chat-avatar', avatar.value)\n      }\n      \n      // 设置初始在线状态\n      store.dispatch('userStatus/setStatus', 'online')\n    }\n    \n    // 更新在线用户列表\n    const updateOnlineUsers = (users) => {\n      onlineUsers.value = users\n    }\n    \n    // 打开个人资料编辑器\n    const openProfileEditor = () => {\n      showProfileEditor.value = true\n    }\n    \n    // 更新个人资料\n    const updateProfile = (profileData) => {\n      userInfo.value = {\n        ...userInfo.value,\n        ...profileData\n      }\n      \n      // 更新localStorage\n      localStorage.setItem('chat-username', profileData.username)\n      localStorage.setItem('chat-avatar', profileData.avatar)\n      localStorage.setItem('chat-bio', profileData.bio)\n      \n      // 更新状态\n      store.dispatch('userStatus/setStatus', profileData.status)\n      \n      showProfileEditor.value = false\n    }\n    \n    const getFallbackAvatarUrl = () => {\n      return 'https://via.placeholder.com/32x32.png?text=No+Avatar'\n    }\n\n    return {\n      username,\n      avatar,\n      onlineUsers,\n      showProfileEditor,\n      userInfo,\n      setUsername,\n      updateOnlineUsers,\n      openProfileEditor,\n      updateProfile,\n      getFallbackAvatarUrl\n    }\n  }\n}\n</script>\n\n<style>\n/* 全局样式重置 */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\n:root {\n  --background-primary: #2f3136;\n  --background-secondary: #36393f;\n  --background-tertiary: #202225;\n  --background-floating: #18191c;\n  --background-modifier-hover: rgba(79, 84, 92, 0.16);\n  --background-modifier-active: rgba(79, 84, 92, 0.24);\n  --background-modifier-selected: rgba(79, 84, 92, 0.32);\n  --text-normal: #dcddde;\n  --text-muted: #72767d;\n  --text-link: #00b0f4;\n  --header-primary: #fff;\n  --header-secondary: #b9bbbe;\n  --border-color: rgba(255, 255, 255, 0.1);\n}\n\nbody, html {\n  height: 100%;\n  width: 100%;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: var(--text-normal);\n  background-color: var(--background-tertiary);\n}\n\n#app {\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.app-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n  background-color: var(--background-tertiary);\n}\n\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  padding: 1rem;\n  background-color: var(--background-tertiary);\n}\n\n/* Discord布局 */\n.discord-layout {\n  display: flex;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n  background-color: var(--background-secondary);\n}\n\n.chat-main {\n  flex: 1;\n  display: flex;\n  flex-direction: column;\n  min-width: 0; /* 防止flex子元素溢出 */\n  background-color: var(--background-primary);\n}\n\n.chat-header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  padding: 16px;\n  background-color: var(--background-primary);\n  border-bottom: 1px solid var(--border-color);\n  height: 60px;\n  flex-shrink: 0;\n}\n\n.chat-header h2 {\n  color: var(--header-primary);\n  font-size: 1.2rem;\n  font-weight: 600;\n}\n\n.user-controls {\n  display: flex;\n  align-items: center;\n  gap: 12px;\n}\n\n.user-profile {\n  position: relative;\n  cursor: pointer;\n  padding: 4px;\n  border-radius: 50%;\n  transition: background-color 0.2s;\n  display: flex;\n  align-items: center;\n}\n\n.user-profile:hover {\n  background-color: var(--background-modifier-hover);\n}\n\n.user-avatar {\n  width: 36px;  /* 稍微增大头像尺寸 */\n  height: 36px;  /* 稍微增大头像尺寸 */\n  border-radius: 50%;\n  transition: opacity 0.2s;\n  border: 2px solid transparent;  /* 添加边框 */\n}\n\n.user-profile:hover .user-avatar {\n  opacity: 0.9;\n  border-color: var(--text-normal);  /* 悬停时显示边框 */\n}\n\n.user-status {\n  position: absolute;\n  bottom: 2px;\n  right: 2px;\n  width: 14px;  /* 稍微增大状态指示器 */\n  height: 14px;  /* 稍微增大状态指示器 */\n  border-radius: 50%;\n  border: 3px solid var(--background-primary);\n  background-color: var(--text-muted);\n  transition: transform 0.2s;  /* 添加过渡效果 */\n}\n\n.user-profile:hover .user-status {\n  transform: scale(1.1);  /* 悬停时稍微放大状态指示器 */\n}\n\n.user-status.online { \n  background-color: #43b581; \n}\n\n.user-status.away { \n  background-color: #faa61a; \n}\n\n.user-status.busy { \n  background-color: #f04747; \n}\n\n.user-status.invisible { \n  background-color: #747f8d; \n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .discord-layout {\n    flex-direction: column;\n  }\n  \n  .chat-main {\n    height: 0;\n    min-height: 0;\n    flex: 1;\n  }\n  \n  .server-list {\n    width: 100% !important;\n    height: auto !important;\n    flex-direction: row !important;\n    padding: 8px !important;\n  }\n  \n  .server-items {\n    flex-direction: row !important;\n    padding: 0 8px !important;\n    overflow-x: auto;\n    overflow-y: hidden;\n    -webkit-overflow-scrolling: touch;\n  }\n  \n  .server-item {\n    margin-right: 8px !important;\n    margin-bottom: 0 !important;\n    flex-shrink: 0;\n  }\n  \n  .chat-header {\n    height: 50px;\n    padding: 8px 12px;\n  }\n  \n  .chat-header h2 {\n    font-size: 1rem;\n  }\n  \n  .user-avatar {\n    width: 28px;\n    height: 28px;\n  }\n}\n\n/* 暗色主题 */\n.theme-dark {\n  --background-primary: #36393f;\n  --background-secondary: #2f3136;\n  --background-tertiary: #202225;\n  --background-floating: #18191c;\n  --text-normal: #dcddde;\n  --text-muted: #72767d;\n  --header-primary: #fff;\n  --header-secondary: #b9bbbe;\n  --border-color: rgba(255, 255, 255, 0.1);\n}\n</style>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}