{"ast":null,"code":"import LoginForm from './components/auth/LoginForm.vue';\nimport ChatContainer from './components/chat/ChatContainer.vue';\nimport ServerList from './components/chat/ServerList.vue';\nimport OnlineUsersSidebar from './components/chat/OnlineUsersSidebar.vue';\nexport default {\n  name: 'App',\n  components: {\n    LoginForm,\n    ChatContainer,\n    ServerList,\n    OnlineUsersSidebar\n  },\n  data() {\n    return {\n      username: '',\n      avatar: '',\n      onlineUsers: [] // 在线用户列表移到App组件中管理\n    };\n  },\n  created() {\n    // 从localStorage获取用户信息\n    const savedUsername = localStorage.getItem('chat-username');\n    const savedAvatar = localStorage.getItem('chat-avatar');\n    if (savedUsername) {\n      this.username = savedUsername;\n      this.avatar = savedAvatar || '';\n    }\n\n    // 应用保存的主题\n    const savedTheme = localStorage.getItem('chat-theme') || 'discord';\n    document.body.classList.add(`theme-${savedTheme}`);\n  },\n  methods: {\n    setUsername(userData) {\n      this.username = userData.username;\n      this.avatar = userData.avatar || '';\n\n      // 初始化用户信息到 store\n      this.$store.dispatch('userStatus/initUser', userData.username);\n\n      // 保存用户信息到localStorage\n      localStorage.setItem('chat-username', this.username);\n      if (this.avatar) {\n        localStorage.setItem('chat-avatar', this.avatar);\n      }\n    },\n    // 更新在线用户列表\n    updateOnlineUsers(users) {\n      this.onlineUsers = users;\n    }\n  }\n};","map":{"version":3,"names":["LoginForm","ChatContainer","ServerList","OnlineUsersSidebar","name","components","data","username","avatar","onlineUsers","created","savedUsername","localStorage","getItem","savedAvatar","savedTheme","document","body","classList","add","methods","setUsername","userData","$store","dispatch","setItem","updateOnlineUsers","users"],"sources":["C:\\Users\\Administrator\\Desktop\\discord-chat-app\\fack\\just-do-it\\src\\App.vue"],"sourcesContent":["<template>\n  <div class=\"app-container\">\n    <div v-if=\"!username\" class=\"login-container\">\n      <LoginForm @login=\"setUsername\" />\n    </div>\n    <div v-else class=\"discord-layout\">\n      <!-- 服务器列表 -->\n      <ServerList />\n      \n      <!-- 在线用户列表 - 将在ChatContainer中移出并放在这里 -->\n      <OnlineUsersSidebar \n        :onlineUsers=\"onlineUsers\" \n        :currentUsername=\"username\"\n      />\n      \n      <!-- 聊天容器 -->\n      <ChatContainer \n        :currentUser=\"{ username, avatar }\" \n        @update-online-users=\"updateOnlineUsers\"\n      />\n    </div>\n  </div>\n</template>\n\n<script>\nimport LoginForm from './components/auth/LoginForm.vue'\nimport ChatContainer from './components/chat/ChatContainer.vue'\nimport ServerList from './components/chat/ServerList.vue'\nimport OnlineUsersSidebar from './components/chat/OnlineUsersSidebar.vue'\n\nexport default {\n  name: 'App',\n  components: {\n    LoginForm,\n    ChatContainer,\n    ServerList,\n    OnlineUsersSidebar\n  },\n  data() {\n    return {\n      username: '',\n      avatar: '',\n      onlineUsers: [] // 在线用户列表移到App组件中管理\n    }\n  },\n  created() {\n    // 从localStorage获取用户信息\n    const savedUsername = localStorage.getItem('chat-username')\n    const savedAvatar = localStorage.getItem('chat-avatar')\n    \n    if (savedUsername) {\n      this.username = savedUsername\n      this.avatar = savedAvatar || ''\n    }\n    \n    // 应用保存的主题\n    const savedTheme = localStorage.getItem('chat-theme') || 'discord'\n    document.body.classList.add(`theme-${savedTheme}`)\n  },\n  methods: {\n    setUsername(userData) {\n      this.username = userData.username;\n      this.avatar = userData.avatar || '';\n      \n      // 初始化用户信息到 store\n      this.$store.dispatch('userStatus/initUser', userData.username);\n      \n      // 保存用户信息到localStorage\n      localStorage.setItem('chat-username', this.username);\n      if (this.avatar) {\n        localStorage.setItem('chat-avatar', this.avatar);\n      }\n    },\n    \n    // 更新在线用户列表\n    updateOnlineUsers(users) {\n      this.onlineUsers = users;\n    }\n  }\n}\n</script>\n\n<style>\n/* 全局样式重置 */\n* {\n  margin: 0;\n  padding: 0;\n  box-sizing: border-box;\n}\n\nbody, html {\n  height: 100%;\n  width: 100%;\n  font-family: Avenir, Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n}\n\n#app {\n  height: 100vh;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n}\n\n.app-container {\n  min-height: 100vh;\n  display: flex;\n  flex-direction: column;\n}\n\n.login-container {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 100vh;\n  padding: 1rem;\n}\n\n/* Discord布局 */\n.discord-layout {\n  display: flex;\n  width: 100%;\n  height: 100vh;\n  overflow: hidden;\n}\n\n/* 响应式设计 */\n@media (max-width: 768px) {\n  .chat-main {\n    flex-direction: column;\n  }\n  \n  .discord-layout {\n    flex-direction: column;\n  }\n  \n  .server-list {\n    width: 100% !important;\n    height: auto !important;\n    flex-direction: row !important;\n    padding: 8px !important;\n  }\n  \n  .server-items {\n    flex-direction: row !important;\n    padding: 0 8px !important;\n  }\n  \n  .server-item {\n    margin-right: 8px !important;\n    margin-bottom: 0 !important;\n  }\n}\n</style>\n"],"mappings":"AAyBA,OAAOA,SAAQ,MAAO,iCAAgC;AACtD,OAAOC,aAAY,MAAO,qCAAoC;AAC9D,OAAOC,UAAS,MAAO,kCAAiC;AACxD,OAAOC,kBAAiB,MAAO,0CAAyC;AAExE,eAAe;EACbC,IAAI,EAAE,KAAK;EACXC,UAAU,EAAE;IACVL,SAAS;IACTC,aAAa;IACbC,UAAU;IACVC;EACF,CAAC;EACDG,IAAIA,CAAA,EAAG;IACL,OAAO;MACLC,QAAQ,EAAE,EAAE;MACZC,MAAM,EAAE,EAAE;MACVC,WAAW,EAAE,EAAC,CAAE;IAClB;EACF,CAAC;EACDC,OAAOA,CAAA,EAAG;IACR;IACA,MAAMC,aAAY,GAAIC,YAAY,CAACC,OAAO,CAAC,eAAe;IAC1D,MAAMC,WAAU,GAAIF,YAAY,CAACC,OAAO,CAAC,aAAa;IAEtD,IAAIF,aAAa,EAAE;MACjB,IAAI,CAACJ,QAAO,GAAII,aAAY;MAC5B,IAAI,CAACH,MAAK,GAAIM,WAAU,IAAK,EAAC;IAChC;;IAEA;IACA,MAAMC,UAAS,GAAIH,YAAY,CAACC,OAAO,CAAC,YAAY,KAAK,SAAQ;IACjEG,QAAQ,CAACC,IAAI,CAACC,SAAS,CAACC,GAAG,CAAC,SAASJ,UAAU,EAAE;EACnD,CAAC;EACDK,OAAO,EAAE;IACPC,WAAWA,CAACC,QAAQ,EAAE;MACpB,IAAI,CAACf,QAAO,GAAIe,QAAQ,CAACf,QAAQ;MACjC,IAAI,CAACC,MAAK,GAAIc,QAAQ,CAACd,MAAK,IAAK,EAAE;;MAEnC;MACA,IAAI,CAACe,MAAM,CAACC,QAAQ,CAAC,qBAAqB,EAAEF,QAAQ,CAACf,QAAQ,CAAC;;MAE9D;MACAK,YAAY,CAACa,OAAO,CAAC,eAAe,EAAE,IAAI,CAAClB,QAAQ,CAAC;MACpD,IAAI,IAAI,CAACC,MAAM,EAAE;QACfI,YAAY,CAACa,OAAO,CAAC,aAAa,EAAE,IAAI,CAACjB,MAAM,CAAC;MAClD;IACF,CAAC;IAED;IACAkB,iBAAiBA,CAACC,KAAK,EAAE;MACvB,IAAI,CAAClB,WAAU,GAAIkB,KAAK;IAC1B;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}